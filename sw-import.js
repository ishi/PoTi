importScripts("bower_components/platinum-sw/service-worker.js"),importScripts("bower_components/requirejs/require.js"),console.log("I am alive"),self.addEventListener("install",function(){console.log("I am installed")}),require.config({baseUrl:".",waitSeconds:0,paths:{lodash:"bower_components/lodash/lodash.min"},deps:["sw-main"]}),define("scripts/timer/timer",["lodash"],function(t){var i=function(i){if(!i)throw new Error("Illegel value: "+i);this.interval=t.clone(i)};return i.prototype._tick=function(){var t=this.interval.value-Math.floor(((new Date).getTime()-this.startDate)/1e3);0>=t&&(t=0),this.remainingTime!==t&&this.tickCb&&this.tickCb(t),this.remainingTime=t,0===t&&this._timeUp()},i.prototype._timeUp=function(){this._stop(),this.timeUpCb&&this.timeUpCb()},i.prototype.start=function(){return this.stop(),this.startDate=(new Date).getTime(),this.timerId=setInterval(this._tick.bind(this),100),this},i.prototype.stop=function(){return this._stop(),this.remainingTime=this.interval.value,this},i.prototype._stop=function(){this.timerId&&clearInterval(this.timerId),this.remainingTime=0,delete this.timerId},i.prototype.onTick=function(t){return this.tickCb=t,this},i.prototype.onTimeUp=function(t){return this.timeUpCb=t,this},i}),define("sw-main",["scripts/timer/timer"],function(t){function i(t){clients.matchAll({type:"window"}).then(function(i){for(var e=0;e<i.length;e++){var n=i[e];n.postMessage(t)}})}function e(i){n(),a=new t(i).onTick(o).onTimeUp(s),a.start()}function n(){a&&a.stop()}function o(t){i({type:"timer-tick",payload:t})}function s(){i({type:"timer-time-up"}),r({title:"Pomodoro",body:{body:"Your time is up"}})}function r(t){this.registration.showNotification(t.title,t.body)}var a;self.addEventListener("message",function(t){var i=t.data;switch(console.log(i),i.type){case"notification":r(i.payload);break;case"timer-start":e(i.payload);break;case"timer-stop":n()}}),self.addEventListener("notificationclick",function(t){t.notification.close(),t.waitUntil(clients.matchAll({type:"window"}).then(function(t){for(var i=0;i<t.length;i++){var e=t[i];if("focus"in e)return e.focus().then(function(t){t.postMessage("message from worker")})}return clients.openWindow?clients.openWindow("/").then(function(t){t.postMessage("message from worker")}):void 0}))})});